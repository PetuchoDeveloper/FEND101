<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semana 2: Consumo Completo de APIs REST | AETL</title>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:opsz,wght@8..60,400;8..60,600;8..60,700&family=JetBrains+Mono:wght@400;500;600&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="aetl-styles.css">
</head>
<body>
    <!-- ========== HEADER INSTITUCIONAL ========== -->
    <header class="header-institucional">
        <div class="header-top">
            <div class="uan-logo">
                <div class="uan-logo-icon">UAN</div>
                <div class="uan-logo-text">
                    <span>Universidad AutÃ³noma de Nayarit</span>
                    <span>Licenciatura en Sistemas Computacionales</span>
                </div>
            </div>
            <div class="header-badge">MODELO AETL</div>
        </div>
        <div class="header-main">
            <p class="header-curso">ProgramaciÃ³n Distribuida del Lado del Cliente</p>
            <h1 class="header-titulo">
                Consumo Completo de <span class="accent">APIs REST</span><br>
                y ValidaciÃ³n de Respuestas
            </h1>
            <div class="header-semana">
                <div class="header-semana-numero">2</div>
                <span>Semana 2 de 15 Â· Fase 1: Fundamentos de ComunicaciÃ³n</span>
            </div>
        </div>
    </header>

    <!-- ========== NAVEGACIÃ“N ========== -->
    <nav class="nav-container">
        <div class="nav-fases">
            <a href="#comprende" class="nav-fase" data-fase="comprende">
                <span class="nav-fase-numero">1</span>
                <span>Comprende</span>
            </a>
            <a href="#aplica" class="nav-fase" data-fase="aplica">
                <span class="nav-fase-numero">2</span>
                <span>Aplica</span>
            </a>
            <a href="#reflexiona" class="nav-fase" data-fase="reflexiona">
                <span class="nav-fase-numero">3</span>
                <span>Reflexiona</span>
            </a>
            <a href="#valida" class="nav-fase" data-fase="valida">
                <span class="nav-fase-numero">4</span>
                <span>Valida</span>
            </a>
            <a href="#profundiza" class="nav-fase" data-fase="profundiza">
                <span class="nav-fase-numero">5</span>
                <span>Profundiza</span>
            </a>
            <a href="#evaluacion" class="nav-fase">
                <span>ğŸ“Š</span>
                <span>EvaluaciÃ³n</span>
            </a>
            <a href="#glosario" class="nav-fase">
                <span>ğŸ“–</span>
                <span>Glosario</span>
            </a>
        </div>
    </nav>

    <!-- ========== BARRA DE PROGRESO ========== -->
    <div class="progress-container">
        <div class="progress-inner">
            <div class="progress-header">
                <span class="progress-title">ğŸ¯ Progreso del Aprendizaje Profundo</span>
                <span class="progress-stats">Fase actual: Comprende</span>
            </div>
            <div class="progress-bar">
                <div class="progress-segment" data-fase="comprende"></div>
                <div class="progress-segment" data-fase="aplica"></div>
                <div class="progress-segment" data-fase="reflexiona"></div>
                <div class="progress-segment" data-fase="valida"></div>
                <div class="progress-segment" data-fase="profundiza"></div>
            </div>
            <div class="progress-legend">
                <div class="progress-legend-item">
                    <div class="progress-legend-dot" style="background: var(--fase-comprende);"></div>
                    <span>Comprende</span>
                </div>
                <div class="progress-legend-item">
                    <div class="progress-legend-dot" style="background: var(--fase-aplica);"></div>
                    <span>Aplica</span>
                </div>
                <div class="progress-legend-item">
                    <div class="progress-legend-dot" style="background: var(--fase-reflexiona);"></div>
                    <span>Reflexiona</span>
                </div>
                <div class="progress-legend-item">
                    <div class="progress-legend-dot" style="background: var(--fase-valida);"></div>
                    <span>Valida</span>
                </div>
                <div class="progress-legend-item">
                    <div class="progress-legend-dot" style="background: var(--fase-profundiza);"></div>
                    <span>Profundiza</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== CONTENIDO PRINCIPAL ========== -->
    <main class="main-content">
        
        <!-- ========== ESCENARIO INMERSIVO ========== -->
        <section class="escenario-inmersivo">
            <div class="escenario-badge">
                <span>ğŸ¬</span>
                <span>ESCENARIO INMERSIVO</span>
            </div>
            <h2 class="escenario-titulo">TechNova DÃ­a 2: El CatÃ¡logo que Nunca Miente</h2>
            <div class="escenario-contexto">
                <p>Martes en <strong>TechNova</strong>. Tu cliente HTTP bÃ¡sico funcionÃ³ ayer para la prueba inicial. Pero esta maÃ±ana, la Product Manager llega con noticias: <em>"Los inversionistas quieren ver operaciones CRUD completas. Necesitan crear productos, actualizarlos y eliminarlos desde la demo. Ah, y algunos productos tienen campos opcionales que a veces vienen vacÃ­os del servidor."</em></p>
                <p style="margin-top: 1rem;">Peor aÃºn: el equipo de QA reportÃ³ que ayer el mock server devolviÃ³ un JSON malformado y tu cliente crasheÃ³ silenciosamente. <em>"En producciÃ³n esto pasarÃ¡. Â¿QuÃ© va a mostrar el usuario cuando el servidor falle?"</em></p>
                <p style="margin-top: 1rem;">Tu misiÃ³n: construir un cliente CRUD robusto que maneje correctamente todos los casos de error y valide las respuestas antes de usarlas.</p>
            </div>
            <div class="escenario-rol">
                <div class="escenario-rol-icon">ğŸ›¡ï¸</div>
                <div class="escenario-rol-text">
                    <h4>Tu Rol: Constructor de Clientes Defensivos</h4>
                    <p>Ya sabes hacer peticiones bÃ¡sicas. Esta semana aprenderÃ¡s a construir clientes que <strong>no confÃ­an ciegamente en el servidor</strong>: validan respuestas, manejan casos edge, y fallan elegantemente cuando algo sale mal.</p>
                </div>
            </div>
        </section>

        <!-- ========== PREREQUISITOS ========== -->
        <section class="prerequisitos-box">
            <h3>ğŸ”‘ Para tener Ã©xito esta semana, asegÃºrate de recordar...</h3>
            <ul class="prerequisitos-lista">
                <li>Los mÃ©todos HTTP (GET, POST, PUT, PATCH, DELETE) y cuÃ¡ndo usar cada uno</li>
                <li>La diferencia entre cÃ³digos 4xx (error del cliente) y 5xx (error del servidor)</li>
                <li>CÃ³mo inspeccionar trÃ¡fico HTTP en DevTools (pestaÃ±a Network)</li>
                <li>La estructura bÃ¡sica de una peticiÃ³n HTTP: mÃ©todo, URL, headers, body</li>
                <li>El concepto de idempotencia y por quÃ© importa para reintentos</li>
            </ul>
        </section>

        <!-- ========== CONEXIÃ“N CON SEMANA ANTERIOR ========== -->
        <section class="conexion-semana-anterior">
            <h3>ğŸ”— ConexiÃ³n directa con Semana 1</h3>
            <ul class="conexion-lista">
                <li><strong>Contrato OpenAPI:</strong> Esta semana usarÃ¡s el contrato que definiste. Si no lo completaste, necesitarÃ¡s hacerlo antes de continuar.</li>
                <li><strong>Cliente HTTP bÃ¡sico:</strong> ExtenderÃ¡s las funciones GET y POST que creaste, agregando PUT, PATCH y DELETE.</li>
                <li><strong>CÃ³digos de estado:</strong> Lo que aprendiste sobre 4xx vs 5xx ahora lo implementarÃ¡s en manejo de errores real.</li>
                <li><strong>Mock server:</strong> SeguirÃ¡s usando el mock server del contrato para desarrollar sin depender del backend.</li>
            </ul>
        </section>

        <!-- ========== ERRORES COMUNES ========== -->
        <section class="errores-comunes-box">
            <h3>âš ï¸ Errores comunes esta semana (que la IA podrÃ­a no detectar)</h3>
            <ul class="errores-lista">
                <li>
                    <strong>Confundir PUT con PATCH:</strong>
                    PUT reemplaza TODO el recurso; si omites un campo, se borra. PATCH solo modifica los campos enviados. La IA puede generar cÃ³digo que "funciona" pero usa el verbo incorrecto.
                </li>
                <li>
                    <strong>No validar el tipo de respuesta antes de parsear:</strong>
                    Asumir que toda respuesta es JSON. Cuando el servidor devuelve HTML de error o texto plano, <code>json.loads()</code> explota.
                </li>
                <li>
                    <strong>Ignorar el cÃ³digo de estado y solo revisar el body:</strong>
                    Un servidor puede devolver <code>{"message": "OK"}</code> con cÃ³digo 500. Solo leer el body te hace creer que todo saliÃ³ bien.
                </li>
                <li>
                    <strong>Hardcodear rutas con IDs:</strong>
                    Construir URLs como <code>"/productos/" + id</code> sin sanitizar. Si <code>id</code> contiene caracteres especiales o es inyectado, rompe o es vulnerable.
                </li>
            </ul>
        </section>

        <!-- ========== FASE 1: COMPRENDE ========== -->
        <section id="comprende" class="fase-section">
            <div class="fase-header" data-fase="comprende">
                <div class="fase-numero">1</div>
                <div class="fase-info">
                    <h2 class="fase-nombre">COMPRENDE</h2>
                    <p class="fase-bloom">Nivel Bloom: <strong>Recordar / Comprender</strong></p>
                </div>
                <div class="fase-tiempo">
                    <span>â±ï¸</span>
                    <span>45 minutos</span>
                </div>
            </div>

            <div class="objetivos-box">
                <h3 class="objetivos-titulo">
                    <span>ğŸ¯</span>
                    Objetivos de Aprendizaje
                </h3>
                <ul class="objetivos-lista">
                    <li>Explicar el mapeo completo entre operaciones CRUD y verbos HTTP</li>
                    <li>Diferenciar entre PUT (reemplazo total) y PATCH (modificaciÃ³n parcial)</li>
                    <li>Identificar los componentes de una URL REST: path params, query params</li>
                    <li>Describir estrategias de validaciÃ³n de respuestas JSON</li>
                </ul>
            </div>

            <div class="contenido-section">
                <h3>CRUD: Las Cuatro Operaciones Fundamentales</h3>
                <p>
                    CRUD es el acrÃ³nimo para <strong>Create, Read, Update, Delete</strong>: las cuatro operaciones bÃ¡sicas 
                    de persistencia de datos. En APIs REST, cada operaciÃ³n se mapea a un verbo HTTP especÃ­fico.
                </p>

                <div class="diagrama-container">
                    <div class="diagrama-ascii">
<span class="diagrama-titulo">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MAPEO CRUD â†’ HTTP                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

    OPERACIÃ“N          VERBO HTTP         EJEMPLO ECOMARKET
    â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    
    CREATE             POST               POST /api/productos
    (Crear)            â””â”€ Body: datos     â””â”€ Crea nuevo producto
                                             Responde 201 Created
    
    READ               GET                GET /api/productos
    (Leer)             â””â”€ Sin body        GET /api/productos/42
                                          â””â”€ Lista o detalle
                                             Responde 200 OK
    
    UPDATE             PUT                PUT /api/productos/42
    (Actualizar)       â””â”€ Body: recurso   â””â”€ Reemplaza TODO el
                          COMPLETO           producto 42
                                             Responde 200 OK
    
                       PATCH              PATCH /api/productos/42
                       â””â”€ Body: solo      â””â”€ Modifica SOLO los
                          campos a           campos enviados
                          modificar          Responde 200 OK
    
    DELETE             DELETE             DELETE /api/productos/42
    (Eliminar)         â””â”€ Sin body        â””â”€ Elimina producto 42
                          (usualmente)       Responde 204 No Content
                    </div>
                    <div class="diagrama-descripcion">
                        <strong>Lectura del diagrama:</strong> Cada operaciÃ³n CRUD se traduce a un verbo HTTP. 
                        Note la distinciÃ³n crÃ­tica entre PUT (reemplazo total) y PATCH (modificaciÃ³n parcial). 
                        Si usas PUT y omites un campo, ese campo se eliminarÃ¡ del recurso.
                    </div>
                </div>

                <div class="caja-contextual caja-warning">
                    <span class="caja-contextual-icon">âš ï¸</span>
                    <div class="caja-contextual-content">
                        <h4>PUT vs PATCH: El Error MÃ¡s ComÃºn</h4>
                        <p>Imagina un producto con campos <code>{nombre, precio, descripcion}</code>. Si envÃ­as <code>PUT /productos/42</code> con solo <code>{precio: 100}</code>, el resultado serÃ¡ un producto <strong>sin nombre ni descripciÃ³n</strong>. Con PATCH, solo cambiarÃ­a el precio.</p>
                    </div>
                </div>
            </div>

            <div class="contenido-section">
                <h3>AnatomÃ­a de URLs REST: Path Params y Query Params</h3>
                <p>
                    Las URLs REST siguen convenciones especÃ­ficas para identificar recursos y modificar comportamiento.
                </p>

                <div class="diagrama-container">
                    <div class="diagrama-ascii">
<span class="diagrama-titulo">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ANATOMÃA DE URL REST                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

https://api.ecomarket.com/api/productos/42?categoria=frutas&orden=precio
â””â”€â”¬â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”¬â”˜â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜â””â”¬â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚             â”‚          â”‚      â”‚      â”‚            â”‚
Esquema      Host      Prefijo  Recurso  ID      Query Params
(https)   (dominio)    (api)  (colecciÃ³n) (path   (filtros y
                                         param)   modificadores)

â”Œâ”€ PATH PARAMETERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Identifican UN recurso especÃ­fico dentro de la colecciÃ³n         â”‚
â”‚  /productos/42     â†’ El producto con ID 42                        â”‚
â”‚  /usuarios/abc/pedidos/5  â†’ El pedido 5 del usuario abc           â”‚
â”‚  Obligatorios para operaciones sobre recurso especÃ­fico           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ QUERY PARAMETERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Modifican o filtran la respuesta, no identifican recursos        â”‚
â”‚  ?categoria=frutas     â†’ Filtrar por categorÃ­a                    â”‚
â”‚  ?orden=precio&dir=asc â†’ Ordenar por precio ascendente            â”‚
â”‚  ?page=2&limit=10      â†’ PaginaciÃ³n                               â”‚
â”‚  ?fields=nombre,precio â†’ SelecciÃ³n de campos (sparse fieldsets)   â”‚
â”‚  Opcionales, tienen valores por defecto                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    </div>
                    <div class="diagrama-descripcion">
                        <strong>Regla clave:</strong> Los path parameters identifican <em>quÃ©</em> recurso quieres. 
                        Los query parameters modifican <em>cÃ³mo</em> lo quieres (filtrado, ordenamiento, paginaciÃ³n). 
                        Nunca uses query params para identificar el recurso principal de la operaciÃ³n.
                    </div>
                </div>
            </div>

            <div class="contenido-section">
                <h3>ValidaciÃ³n de Respuestas: No ConfÃ­es en el Servidor</h3>
                <p>
                    Un cliente robusto nunca asume que la respuesta del servidor es correcta. 
                    La validaciÃ³n ocurre en capas:
                </p>

                <div class="diagrama-container">
                    <div class="diagrama-ascii">
<span class="diagrama-titulo">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                CAPAS DE VALIDACIÃ“N DE RESPUESTA                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

    RESPUESTA DEL SERVIDOR
            â”‚
            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. CÃ“DIGO ESTADO  â”‚  Â¿Es 2xx? Si no, manejar error
    â”‚    Â¿Ã‰xito?        â”‚  Â¿Es 4xx? Error del cliente
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  Â¿Es 5xx? Error del servidor, reintentar?
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2. CONTENT-TYPE   â”‚  Â¿Es application/json?
    â”‚    Â¿Es JSON?      â”‚  Si no, no intentar parsear como JSON
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. PARSEO JSON    â”‚  Â¿El body es JSON vÃ¡lido?
    â”‚    Â¿Es vÃ¡lido?    â”‚  Capturar JSONDecodeError
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 4. ESQUEMA        â”‚  Â¿Tiene los campos requeridos?
    â”‚    Â¿Estructura    â”‚  Â¿Los tipos son correctos?
    â”‚     correcta?     â”‚  Usar JSON Schema o validaciÃ³n manual
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 5. SEMÃNTICA      â”‚  Â¿Los valores tienen sentido?
    â”‚    Â¿Datos vÃ¡lidos?â”‚  Â¿Precio > 0? Â¿Fecha no en futuro?
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
        âœ… DATOS SEGUROS PARA USAR
                    </div>
                    <div class="diagrama-descripcion">
                        <strong>Defensa en profundidad:</strong> Cada capa captura un tipo diferente de problema. 
                        Saltar cualquier capa te expone a errores silenciosos o crashes inesperados. 
                        En producciÃ³n, el servidor <em>fallarÃ¡</em> de formas que no anticipaste.
                    </div>
                </div>

                <div class="caja-contextual caja-tip">
                    <span class="caja-contextual-icon">ğŸ’¡</span>
                    <div class="caja-contextual-content">
                        <h4>Principio del Cliente Paranoico</h4>
                        <p>Asume que el servidor puede enviar cualquier cosa: HTML cuando esperabas JSON, campos faltantes, tipos incorrectos, datos sin sentido. Tu cliente debe sobrevivir a todos estos escenarios sin crashear.</p>
                    </div>
                </div>
            </div>

            <!-- RETO IA #1 - ESENCIAL -->
            <div class="reto-ia">
                <div class="reto-ia-header">
                    <div class="reto-ia-badge">
                        <span class="reto-ia-numero">1</span>
                        <span>RETO IA</span>
                    </div>
                    <span class="reto-tipo-tag esencial">â­ ESENCIAL</span>
                </div>
                <h3 class="reto-ia-titulo">CartÃ³grafo de Operaciones CRUD</h3>
                <div class="reto-ia-rol">
                    <p class="reto-ia-rol-label">Rol asignado a la IA</p>
                    <p class="reto-ia-rol-text">ğŸ“š DiseÃ±ador de APIs REST</p>
                </div>
                <div class="prompt-container">
                    <p class="prompt-label">
                        <span>ğŸ“‹</span>
                        <span>PROMPT COMPLETO</span>
                    </p>
                    <p class="prompt-text">ActÃºa como un diseÃ±ador de APIs REST que me ayudarÃ¡ a entender el mapeo CRUD completo para EcoMarket.

<em>Contexto:</em> EcoMarket tiene tres recursos principales: Productos, Productores y Pedidos. Necesito entender todas las operaciones CRUD para cada uno.

<em>Tu tarea:</em>
Para CADA recurso (Productos, Productores, Pedidos), genera una tabla con:

| OperaciÃ³n | MÃ©todo | Endpoint | Body de ejemplo | Respuesta exitosa | Posibles errores |

<em>Incluye estos casos especiales:</em>
1. Â¿CÃ³mo obtengo los productos de UN productor especÃ­fico? (recurso anidado)
2. Â¿CÃ³mo busco productos por nombre? (query params)
3. Â¿CÃ³mo actualizo SOLO el precio de un producto sin tocar los demÃ¡s campos?
4. Â¿QuÃ© pasa si intento eliminar un productor que tiene productos asociados?

<em>Para cada respuesta de error, especifica:</em>
- CÃ³digo HTTP apropiado
- Estructura del body de error (ejemplo JSON)
- QuÃ© deberÃ­a hacer el cliente al recibir ese error

<em>Formato:</em> Tablas claras con ejemplos JSON reales, no abstractos.</p>
                </div>
                <div class="reto-ia-instrucciones">
                    <h4><span>ğŸ“</span> Instrucciones</h4>
                    <ol>
                        <li>Antes de enviar el prompt, intenta diseÃ±ar tÃº mismo los endpoints para Productos</li>
                        <li>EnvÃ­a el prompt y compara tu diseÃ±o con el de la IA</li>
                        <li>Identifica al menos 2 decisiones de diseÃ±o donde tu enfoque diferÃ­a</li>
                        <li>Actualiza tu contrato OpenAPI de la Semana 1 con los endpoints faltantes</li>
                    </ol>
                </div>
                <div class="reto-ia-entregable">
                    <h4><span>ğŸ“¦</span> Entregable</h4>
                    <p>Tabla comparativa: tu diseÃ±o inicial vs. diseÃ±o de la IA, con justificaciÃ³n de cuÃ¡l prefieres para cada caso. ActualizaciÃ³n del archivo <span class="codigo-inline">openapi.yaml</span> con los nuevos endpoints.</p>
                </div>
            </div>

            <!-- RETO IA #2 - ESENCIAL -->
            <div class="reto-ia">
                <div class="reto-ia-header">
                    <div class="reto-ia-badge">
                        <span class="reto-ia-numero">2</span>
                        <span>RETO IA</span>
                    </div>
                    <span class="reto-tipo-tag esencial">â­ ESENCIAL</span>
                </div>
                <h3 class="reto-ia-titulo">Validador de Respuestas JSON</h3>
                <div class="reto-ia-rol">
                    <p class="reto-ia-rol-label">Rol asignado a la IA</p>
                    <p class="reto-ia-rol-text">ğŸ” Experto en ValidaciÃ³n de Datos</p>
                </div>
                <div class="prompt-container">
                    <p class="prompt-label">
                        <span>ğŸ“‹</span>
                        <span>PROMPT COMPLETO</span>
                    </p>
                    <p class="prompt-text">ActÃºa como un experto en validaciÃ³n de datos que me enseÃ±arÃ¡ a validar respuestas JSON de forma robusta.

<em>Contexto:</em> Mi cliente de EcoMarket espera respuestas JSON con esta estructura:
```json
{
  "id": 42,
  "nombre": "Miel orgÃ¡nica",
  "precio": 150.00,
  "categoria": "miel",
  "productor": {
    "id": 7,
    "nombre": "Apiarios del Valle"
  },
  "disponible": true,
  "creado_en": "2024-01-15T10:30:00Z"
}
```

<em>Tu tarea:</em>
1. Genera una funciÃ³n de validaciÃ³n en Python que verifique:
   - Todos los campos requeridos estÃ¡n presentes
   - Los tipos son correctos (id=int, precio=float, disponible=bool, etc.)
   - El precio es positivo
   - La categorÃ­a es una de las vÃ¡lidas: [frutas, verduras, lacteos, miel, conservas]
   - La fecha estÃ¡ en formato ISO 8601 vÃ¡lido

2. MuÃ©strame 5 ejemplos de JSON "malicioso" o malformado que tu funciÃ³n deberÃ­a rechazar

3. Explica las ventajas y desventajas de usar:
   - ValidaciÃ³n manual (if/else)
   - Pydantic (modelos tipados)
   - JSON Schema
   Para mi caso de uso

<em>RestricciÃ³n:</em> El cÃ³digo debe manejar campos opcionales y objetos anidados (como "productor").</p>
                </div>
                <div class="reto-ia-instrucciones">
                    <h4><span>ğŸ“</span> Instrucciones</h4>
                    <ol>
                        <li>Ejecuta la funciÃ³n de validaciÃ³n con los 5 ejemplos malformados</li>
                        <li>AÃ±ade tu propio caso de JSON malformado que la funciÃ³n no maneje</li>
                        <li>Pide a la IA que mejore la funciÃ³n para manejar tu caso</li>
                        <li>Integra la funciÃ³n de validaciÃ³n en tu cliente HTTP de la Semana 1</li>
                    </ol>
                </div>
                <div class="reto-ia-entregable">
                    <h4><span>ğŸ“¦</span> Entregable</h4>
                    <p>MÃ³dulo <span class="codigo-inline">validadores.py</span> con funciones de validaciÃ³n probadas, mÃ¡s documentaciÃ³n de los 6 casos de prueba (5 de la IA + 1 tuyo).</p>
                </div>
            </div>

            <!-- CHECKPOINT METACOGNITIVO -->
            <div class="checkpoint-metacognitivo">
                <div class="checkpoint-header">
                    <div class="checkpoint-icon">ğŸª</div>
                    <h3 class="checkpoint-title">Checkpoint Metacognitivo - Fase Comprende</h3>
                </div>
                <ul class="checkpoint-preguntas">
                    <li>Â¿Puedo explicar la diferencia entre PUT y PATCH con un ejemplo concreto de EcoMarket?</li>
                    <li>Si el servidor responde con cÃ³digo 200 pero Content-Type: text/html, Â¿quÃ© deberÃ­a hacer mi cliente?</li>
                    <li>Â¿Por quÃ© es importante validar el esquema ademÃ¡s del parseo JSON?</li>
                    <li>Â¿La IA me ayudÃ³ a pensar o solo me dio respuestas que copiÃ©?</li>
                </ul>
            </div>

            <!-- INVARIANTES -->
            <div class="invariantes-box">
                <div class="invariantes-header">
                    <div class="invariantes-icon">ğŸ›¡ï¸</div>
                    <div>
                        <h3 class="invariantes-title">Invariantes que No Deben Romperse</h3>
                        <p class="invariantes-subtitle">Si la IA sugiere algo que viola estos principios, cuestiona la sugerencia</p>
                    </div>
                </div>
                <ul class="invariantes-lista">
                    <li>
                        <strong>PUT siempre envÃ­a el recurso COMPLETO</strong>
                        Si la IA genera cÃ³digo que usa PUT para cambiar un solo campo, es incorrecto. DeberÃ­a ser PATCH.
                    </li>
                    <li>
                        <strong>Siempre verificar el cÃ³digo de estado ANTES de procesar el body</strong>
                        Si el cÃ³digo ignora el status code y va directo al JSON, es frÃ¡gil.
                    </li>
                    <li>
                        <strong>Los path params identifican recursos; los query params filtran/modifican</strong>
                        URLs como <code>/productos?id=42</code> para obtener un producto especÃ­fico violan REST.
                    </li>
                    <li>
                        <strong>DELETE sobre recurso inexistente devuelve 404, no error de servidor</strong>
                        Si la IA sugiere devolver 500 cuando el recurso no existe, es un diseÃ±o incorrecto.
                    </li>
                </ul>
                <div class="invariantes-nota">
                    <span>ğŸ’¡</span>
                    <span>Usa estos invariantes como checklist cuando revises cÃ³digo generado por IA. Si detectas una violaciÃ³n, pregunta explÃ­citamente: "Â¿Por quÃ© esto no viola el principio de [X]?"</span>
                </div>
            </div>
        </section>

        <!-- ========== FASE 2: APLICA ========== -->
        <section id="aplica" class="fase-section">
            <div class="fase-header" data-fase="aplica">
                <div class="fase-numero">2</div>
                <div class="fase-info">
                    <h2 class="fase-nombre">APLICA</h2>
                    <p class="fase-bloom">Nivel Bloom: <strong>Aplicar / Analizar</strong></p>
                </div>
                <div class="fase-tiempo">
                    <span>â±ï¸</span>
                    <span>90 minutos</span>
                </div>
            </div>

            <div class="objetivos-box">
                <h3 class="objetivos-titulo">
                    <span>ğŸ¯</span>
                    Objetivos de Aprendizaje
                </h3>
                <ul class="objetivos-lista">
                    <li>Implementar operaciones CRUD completas contra el mock server</li>
                    <li>Construir URLs dinÃ¡micamente con path params y query params</li>
                    <li>Integrar validaciÃ³n de respuestas en el flujo de comunicaciÃ³n</li>
                    <li>Manejar errores HTTP de forma diferenciada (4xx vs 5xx)</li>
                </ul>
            </div>

            <div class="caja-contextual caja-success">
                <span class="caja-contextual-icon">ğŸ</span>
                <div class="caja-contextual-content">
                    <h4>Lenguaje de ImplementaciÃ³n: Python con requests</h4>
                    <p>Esta semana implementaremos en <strong>Python usando la biblioteca requests</strong>. La sintaxis clara de Python permite enfocarte en los conceptos de comunicaciÃ³n HTTP sin distracciones. Los patrones que aprendas son transferibles a cualquier lenguaje.</p>
                </div>
            </div>

            <div class="contenido-section">
                <h3>Estructura del Cliente CRUD</h3>
                <p>
                    Un cliente CRUD bien estructurado separa las responsabilidades: construcciÃ³n de URLs, 
                    ejecuciÃ³n de peticiones, validaciÃ³n de respuestas, y manejo de errores.
                </p>

                <div class="diagrama-container">
                    <div class="diagrama-ascii">
<span class="diagrama-titulo">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ARQUITECTURA DEL CLIENTE CRUD                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        cliente_ecomarket.py                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚  ConfiguraciÃ³n  â”‚    â”‚   Validadores   â”‚                     â”‚
â”‚  â”‚  BASE_URL       â”‚    â”‚   validar_      â”‚                     â”‚
â”‚  â”‚  TIMEOUT        â”‚    â”‚   producto()    â”‚                     â”‚
â”‚  â”‚  HEADERS_BASE   â”‚    â”‚   validar_      â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   respuesta()   â”‚                     â”‚
â”‚           â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚           â”‚                      â”‚                              â”‚
â”‚           â–¼                      â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚            Funciones CRUD                     â”‚               â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚               â”‚
â”‚  â”‚  â”‚ listar   â”‚ â”‚ obtener  â”‚ â”‚ crear    â”‚      â”‚               â”‚
â”‚  â”‚  â”‚productos â”‚ â”‚producto  â”‚ â”‚producto  â”‚      â”‚               â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚               â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚               â”‚
â”‚  â”‚  â”‚actualizarâ”‚ â”‚actualizarâ”‚ â”‚ eliminar â”‚      â”‚               â”‚
â”‚  â”‚  â”‚ _total   â”‚ â”‚ _parcial â”‚ â”‚producto  â”‚      â”‚               â”‚
â”‚  â”‚  â”‚  (PUT)   â”‚ â”‚ (PATCH)  â”‚ â”‚          â”‚      â”‚               â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚           â”‚                                                     â”‚
â”‚           â–¼                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚         Manejo de Errores                     â”‚               â”‚
â”‚  â”‚  manejar_error_http(response) â†’ Exception     â”‚               â”‚
â”‚  â”‚  â€¢ 400: ValidationError                       â”‚               â”‚
â”‚  â”‚  â€¢ 401: AuthenticationError                   â”‚               â”‚
â”‚  â”‚  â€¢ 404: ResourceNotFoundError                 â”‚               â”‚
â”‚  â”‚  â€¢ 5xx: ServerError (reintentable)            â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    </div>
                    <div class="diagrama-descripcion">
                        <strong>OrganizaciÃ³n modular:</strong> Cada funciÃ³n CRUD es independiente pero comparte 
                        configuraciÃ³n y validadores. El manejo de errores estÃ¡ centralizado para consistencia. 
                        Este patrÃ³n escala bien cuando agregues mÃ¡s recursos (Productores, Pedidos).
                    </div>
                </div>
            </div>

            <div class="contenido-section">
                <h3>CÃ³digo Base: Cliente HTTP con ValidaciÃ³n</h3>
                <p>
                    Este es el esqueleto del cliente que construirÃ¡s. Observa cÃ³mo cada funciÃ³n 
                    sigue el patrÃ³n: construir request â†’ ejecutar â†’ validar status â†’ validar body â†’ retornar.
                </p>

                <div class="codigo-bloque">
                    <div class="codigo-header">
                        <span class="codigo-lenguaje">Python</span>
                        <span class="codigo-archivo">cliente_ecomarket.py (esqueleto)</span>
                    </div>
                    <pre><span class="keyword">import</span> requests
<span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin, urlencode

<span class="comment"># ConfiguraciÃ³n centralizada</span>
BASE_URL = <span class="string">"http://localhost:3000/api/"</span>
TIMEOUT = <span class="number">10</span>  <span class="comment"># segundos</span>

<span class="keyword">class</span> <span class="function">EcoMarketError</span>(Exception):
    <span class="string">"""Error base para el cliente de EcoMarket"""</span>
    <span class="keyword">pass</span>

<span class="keyword">class</span> <span class="function">ValidationError</span>(EcoMarketError):
    <span class="string">"""El servidor rechazÃ³ la peticiÃ³n (4xx)"""</span>
    <span class="keyword">pass</span>

<span class="keyword">class</span> <span class="function">ServerError</span>(EcoMarketError):
    <span class="string">"""Error del servidor (5xx) - puede reintentarse"""</span>
    <span class="keyword">pass</span>

<span class="keyword">def</span> <span class="function">_verificar_respuesta</span>(response):
    <span class="string">"""Verifica cÃ³digo de estado y Content-Type antes de procesar."""</span>
    <span class="comment"># Capa 1: CÃ³digo de estado</span>
    <span class="keyword">if</span> response.status_code >= <span class="number">500</span>:
        <span class="keyword">raise</span> ServerError(f<span class="string">"Error del servidor: {response.status_code}"</span>)
    <span class="keyword">if</span> response.status_code >= <span class="number">400</span>:
        <span class="keyword">raise</span> ValidationError(f<span class="string">"Error de cliente: {response.status_code}"</span>)
    
    <span class="comment"># Capa 2: Content-Type (si esperamos JSON)</span>
    content_type = response.headers.get(<span class="string">'Content-Type'</span>, <span class="string">''</span>)
    <span class="keyword">if</span> <span class="string">'application/json'</span> <span class="keyword">not in</span> content_type:
        <span class="keyword">if</span> response.status_code != <span class="number">204</span>:  <span class="comment"># 204 no tiene body</span>
            <span class="keyword">raise</span> ValidationError(f<span class="string">"Respuesta no es JSON: {content_type}"</span>)
    
    <span class="keyword">return</span> response

<span class="keyword">def</span> <span class="function">listar_productos</span>(categoria=<span class="keyword">None</span>, orden=<span class="keyword">None</span>):
    <span class="string">"""GET /productos con filtros opcionales."""</span>
    url = urljoin(BASE_URL, <span class="string">"productos"</span>)
    
    <span class="comment"># Construir query params dinÃ¡micamente</span>
    params = {}
    <span class="keyword">if</span> categoria:
        params[<span class="string">'categoria'</span>] = categoria
    <span class="keyword">if</span> orden:
        params[<span class="string">'orden'</span>] = orden
    
    response = requests.get(url, params=params, timeout=TIMEOUT)
    _verificar_respuesta(response)
    
    <span class="keyword">return</span> response.json()  <span class="comment"># TODO: AÃ±adir validaciÃ³n de esquema</span>

<span class="keyword">def</span> <span class="function">obtener_producto</span>(producto_id):
    <span class="string">"""GET /productos/{id}"""</span>
    url = urljoin(BASE_URL, f<span class="string">"productos/{producto_id}"</span>)
    
    response = requests.get(url, timeout=TIMEOUT)
    _verificar_respuesta(response)
    
    <span class="keyword">return</span> response.json()

<span class="comment"># TODO: Implementar crear_producto, actualizar_producto_total,</span>
<span class="comment">#       actualizar_producto_parcial, eliminar_producto</span></pre>
                </div>
            </div>

            <!-- RETO IA #3 - ESENCIAL -->
            <div class="reto-ia">
                <div class="reto-ia-header">
                    <div class="reto-ia-badge">
                        <span class="reto-ia-numero">3</span>
                        <span>RETO IA</span>
                    </div>
                    <span class="reto-tipo-tag esencial">â­ ESENCIAL</span>
                </div>
                <h3 class="reto-ia-titulo">Completador de Cliente CRUD</h3>
                <div class="reto-ia-rol">
                    <p class="reto-ia-rol-label">Rol asignado a la IA</p>
                    <p class="reto-ia-rol-text">ğŸ› ï¸ Programador de APIs en Python</p>
                </div>
                <div class="prompt-container">
                    <p class="prompt-label">
                        <span>ğŸ“‹</span>
                        <span>PROMPT COMPLETO</span>
                    </p>
                    <p class="prompt-text">ActÃºa como un programador Python especializado en clientes HTTP. Necesito completar mi cliente CRUD para EcoMarket.

<em>Contexto:</em> Ya tengo implementado listar_productos() y obtener_producto(). El cÃ³digo base usa la biblioteca requests y tiene clases de excepciÃ³n personalizadas.

<em>Tu tarea:</em>
Completa las siguientes funciones siguiendo el mismo patrÃ³n del cÃ³digo existente:

1. <em>crear_producto(datos: dict) -> dict</em>
   - POST /productos
   - Enviar datos como JSON en el body
   - Verificar que la respuesta sea 201 Created
   - Retornar el producto creado (incluye ID generado)

2. <em>actualizar_producto_total(producto_id: int, datos: dict) -> dict</em>
   - PUT /productos/{id}
   - IMPORTANTE: datos debe ser el recurso COMPLETO
   - Verificar respuesta 200 OK
   - Retornar el producto actualizado

3. <em>actualizar_producto_parcial(producto_id: int, campos: dict) -> dict</em>
   - PATCH /productos/{id}
   - campos contiene SOLO los campos a modificar
   - Verificar respuesta 200 OK
   - Retornar el producto actualizado

4. <em>eliminar_producto(producto_id: int) -> bool</em>
   - DELETE /productos/{id}
   - Verificar respuesta 204 No Content
   - Retornar True si se eliminÃ³ exitosamente
   - Si el producto no existe (404), lanzar excepciÃ³n especÃ­fica

<em>Requisitos adicionales:</em>
- Agregar header Content-Type: application/json en POST, PUT, PATCH
- Manejar el caso donde el servidor devuelve 409 Conflict (producto duplicado)
- Incluir docstrings con ejemplos de uso
- NO usar clases, solo funciones (mantenemos simplicidad)</p>
                </div>
                <div class="reto-ia-instrucciones">
                    <h4><span>ğŸ“</span> Instrucciones</h4>
                    <ol>
                        <li>Antes de enviar el prompt, escribe tÃº mismo la firma de cada funciÃ³n</li>
                        <li>Genera el cÃ³digo con la IA y compara las firmas</li>
                        <li>Ejecuta cada funciÃ³n contra tu mock server con datos de prueba</li>
                        <li>Verifica en DevTools que los headers se envÃ­an correctamente</li>
                        <li>Prueba el caso 409 Conflict configurando tu mock para responder asÃ­</li>
                    </ol>
                </div>
                <div class="reto-ia-entregable">
                    <h4><span>ğŸ“¦</span> Entregable</h4>
                    <p>Archivo <span class="codigo-inline">cliente_ecomarket.py</span> completo con las 6 funciones CRUD funcionando. Incluye captura de DevTools mostrando una peticiÃ³n PATCH exitosa.</p>
                </div>
            </div>

            <!-- RETO IA #4 - ESENCIAL -->
            <div class="reto-ia">
                <div class="reto-ia-header">
                    <div class="reto-ia-badge">
                        <span class="reto-ia-numero">4</span>
                        <span>RETO IA</span>
                    </div>
                    <span class="reto-tipo-tag esencial">â­ ESENCIAL</span>
                </div>
                <h3 class="reto-ia-titulo">Integrador de ValidaciÃ³n</h3>
                <div class="reto-ia-rol">
                    <p class="reto-ia-rol-label">Rol asignado a la IA</p>
                    <p class="reto-ia-rol-text">ğŸ”§ Ingeniero de Robustez</p>
                </div>
                <div class="prompt-container">
                    <p class="prompt-label">
                        <span>ğŸ“‹</span>
                        <span>PROMPT COMPLETO</span>
                    </p>
                    <p class="prompt-text">ActÃºa como un ingeniero de software enfocado en robustez. Necesito integrar validaciÃ³n completa en mi cliente HTTP.

<em>Contexto:</em> Tengo un cliente CRUD funcional para EcoMarket, pero actualmente confÃ­a ciegamente en las respuestas del servidor.

<em>Tu tarea:</em>
1. Crea un mÃ³dulo <em>validadores.py</em> con:
   - FunciÃ³n validar_producto(data: dict) -> dict que:
     * Verifica campos requeridos: id, nombre, precio, categoria
     * Verifica tipos: id=int, precio=float, nombre=str, disponible=bool
     * Verifica que precio > 0
     * Verifica que categoria estÃ¡ en ['frutas', 'verduras', 'lacteos', 'miel', 'conservas']
     * Lanza ValidationError con mensaje descriptivo si falla
     * Retorna el dict validado si pasa

   - FunciÃ³n validar_lista_productos(data: list) -> list que:
     * Verifica que sea una lista
     * Valida cada producto individualmente
     * Retorna la lista validada

2. Modifica las funciones del cliente para usar los validadores:
   - obtener_producto() debe validar antes de retornar
   - listar_productos() debe validar la lista completa
   - crear_producto() debe validar la respuesta del servidor

3. Incluye manejo de campos opcionales:
   - descripcion (str, puede faltar)
   - productor (dict con id y nombre, puede faltar)
   - creado_en (str ISO 8601, puede faltar)

<em>Requisito:</em> Los errores de validaciÃ³n deben ser descriptivos, indicando QUÃ‰ campo fallÃ³ y POR QUÃ‰.</p>
                </div>
                <div class="reto-ia-instrucciones">
                    <h4><span>ğŸ“</span> Instrucciones</h4>
                    <ol>
                        <li>Crea el archivo validadores.py con las funciones generadas</li>
                        <li>Escribe 5 tests que prueben casos de validaciÃ³n fallida</li>
                        <li>Configura tu mock server para devolver un producto con precio negativo</li>
                        <li>Verifica que tu cliente detecta y reporta el error correctamente</li>
                    </ol>
                </div>
                <div class="reto-ia-entregable">
                    <h4><span>ğŸ“¦</span> Entregable</h4>
                    <p>Archivos <span class="codigo-inline">validadores.py</span> y <span class="codigo-inline">test_validadores.py</span> con al menos 5 tests de casos de fallo.</p>
                </div>
            </div>

            <!-- RETO IA #5 - AVANZADO -->
            <div class="reto-ia reto-avanzado">
                <div class="reto-ia-header">
                    <div class="reto-ia-badge badge-avanzado">
                        <span class="reto-ia-numero">5</span>
                        <span>RETO IA</span>
                    </div>
                    <span class="reto-tipo-tag avanzado">ğŸš€ AVANZADO</span>
                </div>
                <h3 class="reto-ia-titulo">Constructor de URLs Seguro</h3>
                <div class="reto-ia-rol">
                    <p class="reto-ia-rol-label">Rol asignado a la IA</p>
                    <p class="reto-ia-rol-text">ğŸ”’ Especialista en Seguridad de APIs</p>
                </div>
                <div class="prompt-container">
                    <p class="prompt-label">
                        <span>ğŸ“‹</span>
                        <span>PROMPT COMPLETO</span>
                    </p>
                    <p class="prompt-text">ActÃºa como un especialista en seguridad de APIs. Necesito construir URLs de forma segura en mi cliente.

<em>Problema:</em> Actualmente construyo URLs asÃ­:
```python
url = f"productos/{producto_id}"
```
Esto es vulnerable si producto_id contiene caracteres especiales o es inyectado.

<em>Tu tarea:</em>
1. Crea una clase <em>URLBuilder</em> que:
   - Tenga un mÃ©todo para construir URLs con path params seguros
   - Escape correctamente caracteres especiales
   - Valide que los IDs sean del tipo esperado (int o UUID)
   - Construya query strings de forma segura usando urlencode

2. MuÃ©strame 3 ejemplos de URLs "maliciosas" que podrÃ­an romper mi cliente actual:
   - Path traversal (../../../etc/passwd)
   - InyecciÃ³n de query params
   - Caracteres unicode peligrosos

3. Demuestra cÃ³mo URLBuilder protege contra cada ataque

4. Integra URLBuilder en el cliente existente

<em>Requisito:</em> Usa solo la biblioteca estÃ¡ndar de Python (urllib.parse), sin dependencias externas.</p>
                </div>
                <div class="reto-ia-instrucciones">
                    <h4><span>ğŸ“</span> Instrucciones</h4>
                    <ol>
                        <li>Implementa URLBuilder y pruÃ©bala con los casos maliciosos</li>
                        <li>Intenta "romper" el builder con tu propio caso de prueba</li>
                        <li>Documenta quÃ© ataques previene y cuÃ¡les no (limitaciones)</li>
                        <li>Refactoriza tu cliente para usar URLBuilder en todas las funciones</li>
                    </ol>
                </div>
                <div class="reto-ia-entregable">
                    <h4><span>ğŸ“¦</span> Entregable</h4>
                    <p>Archivo <span class="codigo-inline">url_builder.py</span> con la clase y sus tests. Documento de 1 pÃ¡gina explicando quÃ© ataques previene y cuÃ¡les requieren otras defensas.</p>
                </div>
            </div>

            <!-- CHECKPOINT METACOGNITIVO -->
            <div class="checkpoint-metacognitivo">
                <div class="checkpoint-header">
                    <div class="checkpoint-icon">ğŸª</div>
                    <h3 class="checkpoint-title">Checkpoint Metacognitivo - Fase Aplica</h3>
                </div>
                <ul class="checkpoint-preguntas">
                    <li>Â¿Puedo agregar un nuevo recurso (ej: Pedidos) a mi cliente sin pedir ayuda a la IA?</li>
                    <li>Â¿Entiendo por quÃ© usamos urljoin() en lugar de concatenar strings?</li>
                    <li>Si mi validador rechaza un producto, Â¿el mensaje de error es suficiente para diagnosticar el problema?</li>
                    <li>Â¿CopiÃ© el cÃ³digo de la IA o lo adaptÃ© a mi contexto especÃ­fico?</li>
                </ul>
            </div>

            <!-- INVARIANTES -->
            <div class="invariantes-box">
                <div class="invariantes-header">
                    <div class="invariantes-icon">ğŸ›¡ï¸</div>
                    <div>
                        <h3 class="invariantes-title">Invariantes que No Deben Romperse</h3>
                        <p class="invariantes-subtitle">Verifica que tu cÃ³digo respeta estos principios</p>
                    </div>
                </div>
                <ul class="invariantes-lista">
                    <li>
                        <strong>Toda peticiÃ³n tiene timeout configurado</strong>
                        Si la IA genera cÃ³digo sin timeout, agrÃ©galo. Peticiones sin timeout pueden bloquear tu aplicaciÃ³n indefinidamente.
                    </li>
                    <li>
                        <strong>Nunca concatenar strings para construir URLs con datos de usuario</strong>
                        Siempre usar urljoin() y urlencode() para prevenir inyecciones.
                    </li>
                    <li>
                        <strong>Validar ANTES de usar, no despuÃ©s</strong>
                        Si el cÃ³digo usa response.json()["precio"] antes de validar que "precio" existe, hay un bug latente.
                    </li>
                    <li>
                        <strong>Los errores del servidor (5xx) son diferentes a los del cliente (4xx)</strong>
                        El cÃ³digo debe tratarlos diferente: 5xx puede reintentarse, 4xx generalmente no.
                    </li>
                </ul>
                <div class="invariantes-nota">
                    <span>ğŸ’¡</span>
                    <span>Antes de dar por terminada una funciÃ³n, pregÃºntate: "Â¿QuÃ© pasa si el servidor devuelve basura?" Si tu cÃ³digo crashea, no estÃ¡ listo.</span>
                </div>
            </div>
        </section>

        <!-- ========== FASE 3: REFLEXIONA ========== -->
        <section id="reflexiona" class="fase-section">
            <div class="fase-header" data-fase="reflexiona">
                <div class="fase-numero">3</div>
                <div class="fase-info">
                    <h2 class="fase-nombre">REFLEXIONA</h2>
                    <p class="fase-bloom">Nivel Bloom: <strong>Analizar</strong></p>
                </div>
                <div class="fase-tiempo">
                    <span>â±ï¸</span>
                    <span>45 minutos</span>
                </div>
            </div>

            <div class="objetivos-box">
                <h3 class="objetivos-titulo">
                    <span>ğŸ¯</span>
                    Objetivos de Aprendizaje
                </h3>
                <ul class="objetivos-lista">
                    <li>Analizar las decisiones de diseÃ±o tomadas en la implementaciÃ³n del cliente</li>
                    <li>Comparar enfoques de validaciÃ³n (manual vs Pydantic vs JSON Schema)</li>
                    <li>Justificar el balance entre robustez y simplicidad en el cÃ³digo</li>
                    <li>Documentar trade-offs para decisiones futuras</li>
                </ul>
            </div>

            <div class="contenido-section">
                <h3>Decisiones que Importan</h3>
                <p>
                    Cada lÃ­nea de cÃ³digo implica una decisiÃ³n. Las decisiones mÃ¡s importantes no son sobre 
                    sintaxis, sino sobre <strong>quÃ© compromisos aceptamos</strong> y <strong>quÃ© riesgos toleramos</strong>.
                </p>

                <div class="diagrama-container">
                    <div class="diagrama-ascii">
<span class="diagrama-titulo">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             MATRIZ DE DECISIONES DE VALIDACIÃ“N                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

                           COMPLEJIDAD DEL CÃ“DIGO
                    Baja â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Alta
                    
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    Alta   â”‚                        â”‚                   â”‚
           â”‚   ValidaciÃ³n           â”‚   Pydantic /      â”‚
SEGURIDAD  â”‚   Manual +             â”‚   JSON Schema     â”‚
           â”‚   Tests exhaustivos    â”‚                   â”‚
           â”‚   [Tu cliente actual]  â”‚   [ProducciÃ³n]    â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
           â”‚                        â”‚                   â”‚
    Baja   â”‚   Confiar en el        â”‚   Over-          â”‚
           â”‚   servidor             â”‚   engineering     â”‚
           â”‚   (Â¡PELIGROSO!)        â”‚                   â”‚
           â”‚   [Anti-patrÃ³n]        â”‚   [Desperdicio]   â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    </div>
                    <div class="diagrama-descripcion">
                        <strong>DecisiÃ³n clave:</strong> Tu cliente actual estÃ¡ en el cuadrante superior izquierdo: 
                        validaciÃ³n manual que ofrece seguridad razonable con complejidad manejable. 
                        Para producciÃ³n con muchos tipos de respuesta, considera migrar a Pydantic.
                    </div>
                </div>
            </div>

            <!-- RETO IA #6 - ESENCIAL -->
            <div class="reto-ia">
                <div class="reto-ia-header">
                    <div class="reto-ia-badge">
                        <span class="reto-ia-numero">6</span>
                        <span>RETO IA</span>
                    </div>
                    <span class="reto-tipo-tag esencial">â­ ESENCIAL</span>
                </div>
                <h3 class="reto-ia-titulo">CrÃ­tico de Decisiones de DiseÃ±o</h3>
                <div class="reto-ia-rol">
                    <p class="reto-ia-rol-label">Rol asignado a la IA</p>
                    <p class="reto-ia-rol-text">ğŸ¯ Revisor de Arquitectura</p>
                </div>
                <div class="prompt-container">
                    <p class="prompt-label">
                        <span>ğŸ“‹</span>
                        <span>PROMPT COMPLETO</span>
                    </p>
                    <p class="prompt-text">ActÃºa como un revisor de arquitectura de software. Voy a presentarte mi cliente HTTP y quiero que lo critiques constructivamente.

<em>Mi cliente tiene estas caracterÃ­sticas:</em>
1. Funciones independientes (no clases)
2. ValidaciÃ³n manual con if/else
3. Excepciones personalizadas para cada tipo de error
4. Timeout fijo de 10 segundos
5. Sin reintentos automÃ¡ticos

<em>Tu tarea:</em>
Para CADA decisiÃ³n:
1. PregÃºntame "Â¿Por quÃ© elegiste [X] en lugar de [alternativa]?"
2. DespuÃ©s de mi respuesta, evalÃºa si mi justificaciÃ³n es sÃ³lida
3. Si tiene debilidades, seÃ±Ã¡lalas con una pregunta de seguimiento

<em>Decisiones a revisar:</em>
- Funciones vs clases: Â¿Por quÃ© no una clase ProductosClient?
- ValidaciÃ³n manual vs Pydantic: Â¿Por quÃ© no usar modelos tipados?
- Timeout fijo: Â¿Por quÃ© no configurable por peticiÃ³n?
- Sin reintentos: Â¿QuÃ© pasa cuando hay un error transitorio?
- Excepciones personalizadas: Â¿Por quÃ© no usar las de requests directamente?

<em>Formato:</em> Una pregunta a la vez. Espera mi respuesta antes de continuar. Al final, resume las fortalezas y debilidades de mi diseÃ±o.</p>
                </div>
                <div class="reto-ia-instrucciones">
                    <h4><span>ğŸ“</span> Instrucciones</h4>
                    <ol>
                        <li>Responde cada pregunta con tu razonamiento real, no busques "la respuesta correcta"</li>
                        <li>Si descubres que no tienes buena justificaciÃ³n, sÃ© honesto: "No lo pensÃ© bien"</li>
                        <li>Documenta cada intercambio en un ADR (Architecture Decision Record)</li>
                        <li>Identifica al menos una decisiÃ³n que cambiarÃ­as despuÃ©s de la reflexiÃ³n</li>
                    </ol>
                </div>
                <div class="reto-ia-entregable">
                    <h4><span>ğŸ“¦</span> Entregable</h4>
                    <p>ADR completo con: Contexto â†’ DecisiÃ³n â†’ Alternativas â†’ Consecuencias para al menos 3 de las decisiones revisadas. Incluir una decisiÃ³n que cambiarÃ­as y por quÃ©.</p>
                </div>
            </div>

            <!-- RETO IA #7 - AVANZADO -->
            <div class="reto-ia reto-avanzado">
                <div class="reto-ia-header">
                    <div class="reto-ia-badge badge-avanzado">
                        <span class="reto-ia-numero">7</span>
                        <span>RETO IA</span>
                    </div>
                    <span class="reto-tipo-tag avanzado">ğŸš€ AVANZADO</span>
                </div>
                <h3 class="reto-ia-titulo">Comparador de Estrategias de ValidaciÃ³n</h3>
                <div class="reto-ia-rol">
                    <p class="reto-ia-rol-label">Rol asignado a la IA</p>
                    <p class="reto-ia-rol-text">âš–ï¸ Analista de Trade-offs TÃ©cnicos</p>
                </div>
                <div class="prompt-container">
                    <p class="prompt-label">
                        <span>ğŸ“‹</span>
                        <span>PROMPT COMPLETO</span>
                    </p>
                    <p class="prompt-text">ActÃºa como un analista tÃ©cnico que compara estrategias de validaciÃ³n de datos en Python.

<em>Contexto:</em> Mi cliente valida respuestas JSON manualmente. Quiero entender cuÃ¡ndo deberÃ­a migrar a otras estrategias.

<em>Compara estas 3 estrategias para validar la respuesta de GET /productos:</em>
1. ValidaciÃ³n manual (if/else, como mi cÃ³digo actual)
2. Pydantic v2 (modelos con tipos)
3. JSON Schema (con jsonschema library)

<em>Para cada estrategia, analiza:</em>
- LÃ­neas de cÃ³digo necesarias para validar el modelo Producto
- Rendimiento (Â¿cuÃ¡nto overhead aÃ±ade?)
- Calidad de mensajes de error
- Facilidad para manejar campos opcionales y anidados
- Curva de aprendizaje
- IntegraciÃ³n con editores (autocompletado, errores en tiempo de desarrollo)

<em>Genera:</em>
1. Tabla comparativa con puntuaciÃ³n 1-5 en cada criterio
2. CÃ³digo equivalente en las 3 estrategias para validar Producto
3. RecomendaciÃ³n especÃ­fica para mi caso:
   - Proyecto pequeÃ±o (1 desarrollador, 5 endpoints)
   - Proyecto mediano (equipo, 20+ endpoints)
   - Proyecto enterprise (mÃºltiples equipos, 100+ endpoints)

<em>Formato:</em> Tabla comparativa + cÃ³digo + recomendaciones justificadas.</p>
                </div>
                <div class="reto-ia-instrucciones">
                    <h4><span>ğŸ“</span> Instrucciones</h4>
                    <ol>
                        <li>Implementa la validaciÃ³n con Pydantic para tu modelo Producto</li>
                        <li>Mide el tiempo de validaciÃ³n de 1000 productos con cada estrategia</li>
                        <li>Compara la legibilidad de los mensajes de error</li>
                        <li>Documenta cuÃ¡l usarÃ­as para EcoMarket y por quÃ©</li>
                    </ol>
                </div>
                <div class="reto-ia-entregable">
                    <h4><span>ğŸ“¦</span> Entregable</h4>
                    <p>Archivo <span class="codigo-inline">comparacion_validacion.py</span> con las 3 implementaciones y benchmark. Documento con recomendaciÃ³n justificada para EcoMarket.</p>
                </div>
            </div>

            <!-- CHECKPOINT METACOGNITIVO -->
            <div class="checkpoint-metacognitivo">
                <div class="checkpoint-header">
                    <div class="checkpoint-icon">ğŸª</div>
                    <h3 class="checkpoint-title">Checkpoint Metacognitivo - Fase Reflexiona</h3>
                </div>
                <ul class="checkpoint-preguntas">
                    <li>Â¿CambiÃ© alguna decisiÃ³n de diseÃ±o despuÃ©s de que la IA cuestionara mi razonamiento?</li>
                    <li>Â¿Puedo explicar los trade-offs de mi cliente sin consultar notas?</li>
                    <li>Â¿La IA me hizo pensar en escenarios que no habÃ­a considerado?</li>
                    <li>Â¿Mi ADR serÃ­a Ãºtil para un nuevo miembro del equipo?</li>
                </ul>
            </div>

            <!-- INVARIANTES -->
            <div class="invariantes-box">
                <div class="invariantes-header">
                    <div class="invariantes-icon">ğŸ›¡ï¸</div>
                    <div>
                        <h3 class="invariantes-title">Invariantes que No Deben Romperse</h3>
                        <p class="invariantes-subtitle">Principios que guÃ­an las decisiones de diseÃ±o</p>
                    </div>
                </div>
                <ul class="invariantes-lista">
                    <li>
                        <strong>Toda decisiÃ³n arquitectÃ³nica debe tener justificaciÃ³n documentada</strong>
                        "Porque la IA lo sugiriÃ³" no es justificaciÃ³n vÃ¡lida. Debes poder explicar el por quÃ©.
                    </li>
                    <li>
                        <strong>La simplicidad vence a la elegancia cuando no hay necesidad clara</strong>
                        No uses Pydantic "porque es mejor" si if/else resuelve tu problema actual.
                    </li>
                    <li>
                        <strong>El cÃ³digo debe ser legible por humanos, no solo ejecutable</strong>
                        Si la IA genera cÃ³digo "clever" que no entiendes, simplifÃ­calo.
                    </li>
                </ul>
                <div class="invariantes-nota">
                    <span>ğŸ’¡</span>
                    <span>Las decisiones de hoy son la deuda tÃ©cnica de maÃ±ana. Documenta el "por quÃ©" para que tu yo futuro (o tu reemplazo) entienda el contexto.</span>
                </div>
            </div>
        </section>

        <!-- ========== FASE 4: VALIDA ========== -->
        <section id="valida" class="fase-section">
            <div class="fase-header" data-fase="valida">
                <div class="fase-numero">4</div>
                <div class="fase-info">
                    <h2 class="fase-nombre">VALIDA</h2>
                    <p class="fase-bloom">Nivel Bloom: <strong>Evaluar</strong></p>
                </div>
                <div class="fase-tiempo">
                    <span>â±ï¸</span>
                    <span>60 minutos</span>
                </div>
            </div>

            <div class="objetivos-box">
                <h3 class="objetivos-titulo">
                    <span>ğŸ¯</span>
                    Objetivos de Aprendizaje
                </h3>
                <ul class="objetivos-lista">
                    <li>Verificar que el cliente maneja correctamente todos los cÃ³digos de error HTTP</li>
                    <li>Probar el cliente con respuestas malformadas y edge cases</li>
                    <li>Auditar el cÃ³digo generado por IA contra los invariantes establecidos</li>
                    <li>Documentar bugs encontrados y correcciones aplicadas</li>
                </ul>
            </div>

            <div class="contenido-section">
                <h3>Testing de Clientes HTTP: MÃ¡s AllÃ¡ del Happy Path</h3>
                <p>
                    Probar que el cliente funciona cuando todo va bien es fÃ¡cil. Lo difÃ­cil es probar 
                    quÃ© pasa cuando el servidor se comporta de forma inesperada.
                </p>

                <div class="diagrama-container">
                    <div class="diagrama-ascii">
<span class="diagrama-titulo">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                MATRIZ DE CASOS DE PRUEBA                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

                    RESPUESTA DEL SERVIDOR
            VÃ¡lida â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º InvÃ¡lida
            
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  âœ… HAPPY PATH          â”‚  âš ï¸ EDGE CASES         â”‚
2xx â”‚  Producto creado        â”‚  Body vacÃ­o con 200    â”‚
    â”‚  Lista retornada        â”‚  JSON vÃ¡lido pero      â”‚
    â”‚  [TODOS prueban esto]   â”‚  campos faltantes      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  âš ï¸ ERRORES ESPERADOS   â”‚  ğŸ”´ CAOS              â”‚
4xx â”‚  404 producto no existe â”‚  HTML en lugar de JSON â”‚
5xx â”‚  401 no autorizado      â”‚  ConexiÃ³n cortada      â”‚
    â”‚  [POCOS prueban esto]   â”‚  Timeout infinito      â”‚
    â”‚                         â”‚  [CASI NADIE prueba]   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    </div>
                    <div class="diagrama-descripcion">
                        <strong>Meta de esta fase:</strong> Tu cliente debe sobrevivir a todos los cuadrantes. 
                        El cuadrante inferior derecho (caos) es donde los bugs de producciÃ³n viven. 
                        Si solo pruebas el happy path, tendrÃ¡s sorpresas desagradables.
                    </div>
                </div>
            </div>

            <!-- RETO IA #8 - ESENCIAL -->
            <div class="reto-ia">
                <div class="reto-ia-header">
                    <div class="reto-ia-badge">
                        <span class="reto-ia-numero">8</span>
                        <span>RETO IA</span>
                    </div>
                    <span class="reto-tipo-tag esencial">â­ ESENCIAL</span>
                </div>
                <h3 class="reto-ia-titulo">DiseÃ±ador de Suite de Pruebas</h3>
                <div class="reto-ia-rol">
                    <p class="reto-ia-rol-label">Rol asignado a la IA</p>
                    <p class="reto-ia-rol-text">ğŸ§ª Ingeniero de QA Senior</p>
                </div>
                <div class="prompt-container">
                    <p class="prompt-label">
                        <span>ğŸ“‹</span>
                        <span>PROMPT COMPLETO</span>
                    </p>
                    <p class="prompt-text">ActÃºa como un ingeniero de QA que diseÃ±a suites de pruebas exhaustivas para clientes HTTP.

<em>Contexto:</em> Tengo un cliente CRUD para EcoMarket con estas funciones:
- listar_productos(categoria, orden)
- obtener_producto(id)
- crear_producto(datos)
- actualizar_producto_total(id, datos)
- actualizar_producto_parcial(id, campos)
- eliminar_producto(id)

<em>Tu tarea:</em>
DiseÃ±a una suite de pruebas usando pytest y responses (para mockear HTTP) que cubra:

1. <em>Happy Path</em> (6 tests):
   - Un test por cada funciÃ³n con datos vÃ¡lidos

2. <em>Errores HTTP</em> (8 tests):
   - 400 Bad Request al crear con datos invÃ¡lidos
   - 401 Unauthorized sin token
   - 404 Not Found al obtener/actualizar/eliminar producto inexistente
   - 409 Conflict al crear producto duplicado
   - 500 Internal Server Error
   - 503 Service Unavailable

3. <em>Edge Cases</em> (6 tests):
   - Respuesta vacÃ­a con 200
   - Content-Type incorrecto (text/html)
   - JSON vÃ¡lido pero estructura incorrecta
   - Timeout del servidor
   - Campo "precio" como string en lugar de nÃºmero
   - Lista de productos vacÃ­a

<em>Para cada test incluye:</em>
- Nombre descriptivo (test_crear_producto_con_precio_negativo_retorna_400)
- Setup del mock
- AserciÃ³n clara
- Comentario explicando quÃ© escenario prueba

<em>Formato:</em> CÃ³digo Python completo con pytest y responses, listo para ejecutar.</p>
                </div>
                <div class="reto-ia-instrucciones">
                    <h4><span>ğŸ“</span> Instrucciones</h4>
                    <ol>
                        <li>Instala pytest y responses: <span class="codigo-inline">pip install pytest responses</span></li>
                        <li>Crea el archivo <span class="codigo-inline">test_cliente.py</span> con los tests generados</li>
                        <li>Ejecuta: <span class="codigo-inline">pytest test_cliente.py -v</span></li>
                        <li>Para cada test que falle, corrige tu cliente (no el test)</li>
                        <li>Agrega al menos 2 tests propios para casos que la IA no cubriÃ³</li>
                    </ol>
                </div>
                <div class="reto-ia-entregable">
                    <h4><span>ğŸ“¦</span> Entregable</h4>
                    <p>Archivo <span class="codigo-inline">test_cliente.py</span> con 20+ tests pasando. Reporte de bugs encontrados y correcciones aplicadas al cliente.</p>
                </div>
            </div>

            <!-- RETO IA #9 - AVANZADO -->
            <div class="reto-ia reto-avanzado">
                <div class="reto-ia-header">
                    <div class="reto-ia-badge badge-avanzado">
                        <span class="reto-ia-numero">9</span>
                        <span>RETO IA</span>
                    </div>
                    <span class="reto-tipo-tag avanzado">ğŸš€ AVANZADO</span>
                </div>
                <h3 class="reto-ia-titulo">Auditor de Conformidad con OpenAPI</h3>
                <div class="reto-ia-rol">
                    <p class="reto-ia-rol-label">Rol asignado a la IA</p>
                    <p class="reto-ia-rol-text">ğŸ“‹ Verificador de Contratos</p>
                </div>
                <div class="prompt-container">
                    <p class="prompt-label">
                        <span>ğŸ“‹</span>
                        <span>PROMPT COMPLETO</span>
                    </p>
                    <p class="prompt-text">ActÃºa como un verificador de contratos de API. Necesito asegurar que mi cliente cumple con el contrato OpenAPI.

<em>Contexto:</em> Tengo un archivo openapi.yaml que define el contrato de EcoMarket, y un cliente Python que deberÃ­a cumplirlo.

<em>Tu tarea:</em>
1. Genera un script Python que:
   - Lea el contrato OpenAPI (usa pyyaml o openapi-core)
   - Para cada endpoint definido, verifique que:
     * El cliente tiene una funciÃ³n correspondiente
     * La funciÃ³n envÃ­a los headers requeridos
     * La funciÃ³n maneja todos los cÃ³digos de respuesta documentados
     * La funciÃ³n valida la estructura de respuesta segÃºn el schema

2. El script debe generar un reporte con:
   - âœ… Conformidad: funciÃ³n X cumple con endpoint Y
   - âš ï¸ Parcial: funciÃ³n X no maneja cÃ³digo 409
   - âŒ Faltante: no hay funciÃ³n para endpoint Z

3. Incluye tests automatizados que:
   - Usen schemathesis para generar casos de prueba desde el OpenAPI
   - Ejecuten fuzzing bÃ¡sico contra el mock server
   - Reporten violaciones del contrato

<em>Requisito:</em> El reporte debe ser Ãºtil para identificar rÃ¡pidamente quÃ© falta por implementar o corregir.</p>
                </div>
                <div class="reto-ia-instrucciones">
                    <h4><span>ğŸ“</span> Instrucciones</h4>
                    <ol>
                        <li>Instala dependencias: <span class="codigo-inline">pip install pyyaml schemathesis</span></li>
                        <li>Ejecuta el script de auditorÃ­a contra tu cliente</li>
                        <li>Corrige todas las no-conformidades encontradas</li>
                        <li>Ejecuta schemathesis contra tu mock server</li>
                        <li>Documenta quÃ© tan bien tu cliente cumple el contrato</li>
                    </ol>
                </div>
                <div class="reto-ia-entregable">
                    <h4><span>ğŸ“¦</span> Entregable</h4>
                    <p>Script <span class="codigo-inline">auditar_contrato.py</span> + reporte de conformidad + cliente corregido con 100% de conformidad.</p>
                </div>
            </div>

            <!-- CHECKPOINT METACOGNITIVO -->
            <div class="checkpoint-metacognitivo">
                <div class="checkpoint-header">
                    <div class="checkpoint-icon">ğŸª</div>
                    <h3 class="checkpoint-title">Checkpoint Metacognitivo - Fase Valida</h3>
                </div>
                <ul class="checkpoint-preguntas">
                    <li>Â¿CuÃ¡ntos bugs encontrÃ© en mi cÃ³digo que no habÃ­a detectado antes de escribir tests?</li>
                    <li>Â¿Mis tests prueban comportamiento o implementaciÃ³n? (Â¿Se romperÃ­an si refactorizo?)</li>
                    <li>Â¿La suite de tests me da confianza para modificar el cÃ³digo?</li>
                    <li>Â¿QuÃ© escenarios de producciÃ³n aÃºn no estÃ¡n cubiertos?</li>
                </ul>
            </div>

            <!-- INVARIANTES -->
            <div class="invariantes-box">
                <div class="invariantes-header">
                    <div class="invariantes-icon">ğŸ›¡ï¸</div>
                    <div>
                        <h3 class="invariantes-title">Invariantes que No Deben Romperse</h3>
                        <p class="invariantes-subtitle">Criterios de calidad para tus pruebas</p>
                    </div>
                </div>
                <ul class="invariantes-lista">
                    <li>
                        <strong>Los tests deben ser independientes entre sÃ­</strong>
                        Si un test depende de que otro se ejecute primero, tienes un problema de diseÃ±o.
                    </li>
                    <li>
                        <strong>Los tests no deben hacer peticiones reales a servidores externos</strong>
                        Usa mocks. Los tests deben funcionar sin conexiÃ³n a internet.
                    </li>
                    <li>
                        <strong>Cada test debe tener una sola razÃ³n para fallar</strong>
                        Si un test puede fallar por 5 razones diferentes, divÃ­delo en 5 tests.
                    </li>
                    <li>
                        <strong>Los tests de error son tan importantes como los de Ã©xito</strong>
                        Si solo tienes tests de happy path, no tienes una suite de pruebas completa.
                    </li>
                </ul>
                <div class="invariantes-nota">
                    <span>ğŸ’¡</span>
                    <span>Una suite de pruebas que pasa al 100% pero no encuentra bugs es inÃºtil. El valor estÃ¡ en los bugs que atrapa, no en la cantidad de tests.</span>
                </div>
            </div>
        </section>

        <!-- ========== FASE 5: PROFUNDIZA ========== -->
        <section id="profundiza" class="fase-section">
            <div class="fase-header" data-fase="profundiza">
                <div class="fase-numero">5</div>
                <div class="fase-info">
                    <h2 class="fase-nombre">PROFUNDIZA</h2>
                    <p class="fase-bloom">Nivel Bloom: <strong>Crear</strong></p>
                </div>
                <div class="fase-tiempo">
                    <span>â±ï¸</span>
                    <span>45 minutos</span>
                </div>
            </div>

            <div class="objetivos-box">
                <h3 class="objetivos-titulo">
                    <span>ğŸ¯</span>
                    Objetivos de Aprendizaje
                </h3>
                <ul class="objetivos-lista">
                    <li>Explorar extensiones al cliente que no fueron requeridas explÃ­citamente</li>
                    <li>Conectar lo aprendido con temas de semanas futuras</li>
                    <li>Identificar preguntas abiertas que guiarÃ¡n el aprendizaje posterior</li>
                    <li>Crear artefactos originales que demuestren sÃ­ntesis creativa</li>
                </ul>
            </div>

            <div class="contenido-section">
                <h3>Mirando Hacia Adelante: QuÃ© Viene en las PrÃ³ximas Semanas</h3>
                <p>
                    Esta semana completaste un cliente CRUD robusto. Pero en producciÃ³n, 
                    los problemas son mÃ¡s complejos. AquÃ­ hay un vistazo de lo que aprenderÃ¡s:
                </p>

                <div class="diagrama-container">
                    <div class="diagrama-ascii">
<span class="diagrama-titulo">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ROADMAP: DE SEMANA 2 AL PROYECTO FINAL              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>

SEMANA 2 (AHORA)               PRÃ“XIMAS SEMANAS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                                
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cliente CRUD    â”‚            â”‚ SEMANA 3        â”‚
â”‚ â€¢ Operaciones   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ AsincronÃ­a      â”‚
â”‚   completas     â”‚            â”‚ â€¢ async/await   â”‚
â”‚ â€¢ ValidaciÃ³n    â”‚            â”‚ â€¢ Concurrencia  â”‚
â”‚ â€¢ Manejo erroresâ”‚            â”‚ â€¢ Peticiones    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚   paralelas     â”‚
        â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                               â”‚
        â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      â”‚ SEMANAS 6-7     â”‚
        â”‚                      â”‚ Arquitectura    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ â€¢ Repository    â”‚
                               â”‚   pattern       â”‚
                               â”‚ â€¢ CachÃ© local   â”‚
                               â”‚ â€¢ Estado        â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚ SEMANAS 8-9     â”‚
                               â”‚ Seguridad       â”‚
                               â”‚ â€¢ JWT tokens    â”‚
                               â”‚ â€¢ OAuth 2.0     â”‚
                               â”‚ â€¢ HTTPS/TLS     â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                               â”‚ SEMANA 11       â”‚
                               â”‚ Tiempo Real     â”‚
                               â”‚ â€¢ WebSocket     â”‚
                               â”‚ â€¢ SSE           â”‚
                               â”‚ â€¢ Notificacionesâ”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    </div>
                    <div class="diagrama-descripcion">
                        <strong>ConexiÃ³n con el futuro:</strong> El cliente que construiste esta semana es sÃ­ncrono 
                        y secuencial. La Semana 3 lo convertirÃ¡s en asÃ­ncrono para manejar mÃºltiples peticiones 
                        simultÃ¡neas. Los validadores que creaste serÃ¡n la base del patrÃ³n Repository.
                    </div>
                </div>
            </div>

            <div class="contenido-section">
                <h3>Preguntas Abiertas para Explorar</h3>
                <p>
                    El aprendizaje profundo genera mÃ¡s preguntas que respuestas. Estas preguntas 
                    te acompaÃ±arÃ¡n durante el resto del curso:
                </p>
                <ul class="lista-conceptos">
                    <li>Â¿CÃ³mo evitar que 100 usuarios hagan la misma peticiÃ³n simultÃ¡neamente? (â†’ CachÃ©, Semana 7)</li>
                    <li>Â¿QuÃ© pasa si el token de autenticaciÃ³n expira a mitad de una operaciÃ³n? (â†’ JWT, Semana 8)</li>
                    <li>Â¿CÃ³mo saber que un producto cambiÃ³ sin hacer polling constante? (â†’ WebSocket, Semana 11)</li>
                    <li>Â¿CÃ³mo funciona la app si el usuario estÃ¡ sin internet? (â†’ Offline-first, Semana 12)</li>
                    <li>Â¿CÃ³mo pruebo que mi cliente funciona con el servidor real, no solo con mocks? (â†’ Contract Testing, Semana 13)</li>
                </ul>
            </div>

            <!-- RETO IA #10 - AVANZADO (EXTENSIÃ“N) -->
            <div class="reto-ia reto-avanzado">
                <div class="reto-ia-header">
                    <div class="reto-ia-badge badge-avanzado">
                        <span class="reto-ia-numero">10</span>
                        <span>RETO IA Â· EXTENSIÃ“N</span>
                    </div>
                    <span class="reto-tipo-tag avanzado">ğŸš€ AVANZADO</span>
                </div>
                <h3 class="reto-ia-titulo">DiseÃ±ador de Sistema de Reintentos</h3>
                <div class="reto-ia-rol">
                    <p class="reto-ia-rol-label">Rol asignado a la IA</p>
                    <p class="reto-ia-rol-text">ğŸ”„ Ingeniero de Resiliencia</p>
                </div>
                <div class="prompt-container">
                    <p class="prompt-label">
                        <span>ğŸ“‹</span>
                        <span>PROMPT COMPLETO</span>
                    </p>
                    <p class="prompt-text">ActÃºa como un ingeniero de resiliencia que diseÃ±a sistemas de reintento para clientes HTTP.

<em>Contexto:</em> Mi cliente actual falla inmediatamente cuando hay un error 5xx. En producciÃ³n, estos errores suelen ser transitorios (servidor sobrecargado, deploy en progreso, etc.).

<em>Tu tarea:</em>
1. DiseÃ±a un decorador @with_retry que:
   - Reintente automÃ¡ticamente en errores 5xx y timeouts
   - Use exponential backoff (1s, 2s, 4s, 8s...)
   - Tenga un mÃ¡ximo de reintentos configurable
   - Agregue jitter (variaciÃ³n aleatoria) para evitar thundering herd
   - NO reintente en errores 4xx (son errores del cliente, reintentar no ayuda)
   - Log cada reintento con el tiempo de espera

2. Incluye:
   - El cÃ³digo del decorador en Python
   - Ejemplo de cÃ³mo aplicarlo a mis funciones existentes
   - Tests que demuestren el comportamiento de retry

3. Explica:
   - Â¿Por quÃ© exponential backoff en lugar de reintentos inmediatos?
   - Â¿Por quÃ© jitter? Â¿QuÃ© es thundering herd?
   - Â¿CuÃ¡ndo NO deberÃ­a reintentar aunque sea un 5xx?

<em>RestricciÃ³n:</em> No uses bibliotecas externas de retry (tenacity, backoff). Quiero entender la implementaciÃ³n.</p>
                </div>
                <div class="reto-ia-instrucciones">
                    <h4><span>ğŸ“</span> Instrucciones</h4>
                    <ol>
                        <li>Implementa el decorador y aplÃ­calo a tu funciÃ³n obtener_producto()</li>
                        <li>Configura tu mock server para fallar las primeras 2 peticiones con 503</li>
                        <li>Verifica que tu cliente reintenta y eventualmente tiene Ã©xito</li>
                        <li>Mide y documenta los tiempos de espera entre reintentos</li>
                        <li>Reflexiona: Â¿Es este retry apropiado para crear_producto()? Â¿Por quÃ©?</li>
                    </ol>
                </div>
                <div class="reto-ia-entregable">
                    <h4><span>ğŸ“¦</span> Entregable</h4>
                    <p>MÃ³dulo <span class="codigo-inline">retry.py</span> con el decorador y tests. Documento explicando cuÃ¡ndo es seguro reintentar y cuÃ¡ndo no (con referencia a idempotencia de Semana 1).</p>
                </div>
            </div>

            <!-- CHECKPOINT METACOGNITIVO -->
            <div class="checkpoint-metacognitivo">
                <div class="checkpoint-header">
                    <div class="checkpoint-icon">ğŸª</div>
                    <h3 class="checkpoint-title">Checkpoint Metacognitivo - Fase Profundiza</h3>
                </div>
                <ul class="checkpoint-preguntas">
                    <li>Â¿QuÃ© pregunta tengo ahora que no tenÃ­a al comenzar la semana?</li>
                    <li>Â¿Puedo ver cÃ³mo el cliente de esta semana conecta con la arquitectura de la Semana 6?</li>
                    <li>Â¿Propuse alguna extensiÃ³n que la IA no habÃ­a sugerido?</li>
                    <li>Â¿Si tuviera que explicar "validaciÃ³n de respuestas" a un novato, quÃ© analogÃ­a usarÃ­a?</li>
                </ul>
            </div>

            <!-- INVARIANTES -->
            <div class="invariantes-box">
                <div class="invariantes-header">
                    <div class="invariantes-icon">ğŸ›¡ï¸</div>
                    <div>
                        <h3 class="invariantes-title">Invariantes que No Deben Romperse</h3>
                        <p class="invariantes-subtitle">Principios para extensiones y mejoras</p>
                    </div>
                </div>
                <ul class="invariantes-lista">
                    <li>
                        <strong>Solo reintentar operaciones idempotentes automÃ¡ticamente</strong>
                        GET, PUT, DELETE pueden reintentarse. POST no (podrÃ­as crear duplicados).
                    </li>
                    <li>
                        <strong>Las extensiones no deben romper la API existente</strong>
                        Agregar retry no debe cambiar cÃ³mo se llama a las funciones existentes.
                    </li>
                    <li>
                        <strong>Exponential backoff con lÃ­mite mÃ¡ximo</strong>
                        Sin lÃ­mite, podrÃ­as esperar horas entre reintentos. Define un tope (ej: 60 segundos).
                    </li>
                </ul>
                <div class="invariantes-nota">
                    <span>ğŸ’¡</span>
                    <span>Las mejores extensiones son las que resuelven problemas que has experimentado, no las que suenan impresionantes en teorÃ­a.</span>
                </div>
            </div>
        </section>

        <!-- ========== SISTEMA DE EVALUACIÃ“N ========== -->
        <section id="evaluacion" class="evaluacion-section">
            <div class="section-header">
                <div class="section-icon">ğŸ“Š</div>
                <h2 class="section-title">Sistema de EvaluaciÃ³n - Semana 2</h2>
            </div>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                La evaluaciÃ³n mide tanto productos (cÃ³digo funcional) como proceso (calidad del pensamiento crÃ­tico).
                Los retos avanzados bonifican pero no son obligatorios.
            </p>
            <div class="evaluacion-grid">
                <div class="evaluacion-item">
                    <div class="evaluacion-item-info">
                        <div class="evaluacion-item-fase" style="background: var(--fase-comprende);">1</div>
                        <span class="evaluacion-item-nombre">Retos 1-2: Mapeo CRUD + ValidaciÃ³n conceptual</span>
                    </div>
                    <span class="evaluacion-item-porcentaje">15%</span>
                </div>
                <div class="evaluacion-item">
                    <div class="evaluacion-item-info">
                        <div class="evaluacion-item-fase" style="background: var(--fase-aplica);">2</div>
                        <span class="evaluacion-item-nombre">Retos 3-4: Cliente CRUD + Validadores integrados</span>
                    </div>
                    <span class="evaluacion-item-porcentaje">35%</span>
                </div>
                <div class="evaluacion-item">
                    <div class="evaluacion-item-info">
                        <div class="evaluacion-item-fase" style="background: var(--fase-reflexiona);">3</div>
                        <span class="evaluacion-item-nombre">Reto 6: ADR con decisiones documentadas</span>
                    </div>
                    <span class="evaluacion-item-porcentaje">15%</span>
                </div>
                <div class="evaluacion-item">
                    <div class="evaluacion-item-info">
                        <div class="evaluacion-item-fase" style="background: var(--fase-valida);">4</div>
                        <span class="evaluacion-item-nombre">Reto 8: Suite de pruebas (20+ tests pasando)</span>
                    </div>
                    <span class="evaluacion-item-porcentaje">25%</span>
                </div>
                <div class="evaluacion-item">
                    <div class="evaluacion-item-info">
                        <div class="evaluacion-item-fase" style="background: var(--fase-profundiza);">5</div>
                        <span class="evaluacion-item-nombre">Checkpoints metacognitivos completados</span>
                    </div>
                    <span class="evaluacion-item-porcentaje">10%</span>
                </div>
            </div>

            <div class="caja-contextual caja-success" style="margin-top: 2rem;">
                <span class="caja-contextual-icon">ğŸŒŸ</span>
                <div class="caja-contextual-content">
                    <h4>BonificaciÃ³n por Retos Avanzados</h4>
                    <p>Los retos 5, 7, 9 y 10 (marcados como ğŸš€ AVANZADO) otorgan hasta <strong>+15% extra</strong> sobre la calificaciÃ³n base. No son obligatorios pero demuestran dominio profundo del tema.</p>
                </div>
            </div>
        </section>

        <!-- ========== GLOSARIO ========== -->
        <section id="glosario" class="glosario-section">
            <div class="section-header">
                <div class="section-icon">ğŸ“–</div>
                <h2 class="section-title">Glosario - Semana 2</h2>
            </div>
            <div class="glosario-grid">
                <div class="glosario-item">
                    <p class="glosario-termino">
                        CRUD
                        <span class="glosario-tipo disciplinar">Disciplinar</span>
                    </p>
                    <p class="glosario-definicion">Create, Read, Update, Delete. Las cuatro operaciones bÃ¡sicas de persistencia de datos, mapeadas a POST, GET, PUT/PATCH, DELETE en REST.</p>
                </div>
                <div class="glosario-item">
                    <p class="glosario-termino">
                        Path Parameter
                        <span class="glosario-tipo disciplinar">Disciplinar</span>
                    </p>
                    <p class="glosario-definicion">Variable en la ruta de la URL que identifica un recurso especÃ­fico. Ej: /productos/{id} donde {id} es el path param.</p>
                </div>
                <div class="glosario-item">
                    <p class="glosario-termino">
                        Query Parameter
                        <span class="glosario-tipo disciplinar">Disciplinar</span>
                    </p>
                    <p class="glosario-definicion">ParÃ¡metro despuÃ©s del ? en la URL que modifica la peticiÃ³n (filtros, ordenamiento, paginaciÃ³n). No identifica recursos.</p>
                </div>
                <div class="glosario-item">
                    <p class="glosario-termino">
                        ValidaciÃ³n de Esquema
                        <span class="glosario-tipo disciplinar">Disciplinar</span>
                    </p>
                    <p class="glosario-definicion">Proceso de verificar que un JSON tiene la estructura esperada: campos correctos, tipos correctos, restricciones cumplidas.</p>
                </div>
                <div class="glosario-item">
                    <p class="glosario-termino">
                        Exponential Backoff
                        <span class="glosario-tipo disciplinar">Disciplinar</span>
                    </p>
                    <p class="glosario-definicion">Estrategia de reintentos donde el tiempo de espera se duplica en cada intento (1s, 2s, 4s...). Evita sobrecargar servidores con problemas.</p>
                </div>
                <div class="glosario-item">
                    <p class="glosario-termino">
                        Thundering Herd
                        <span class="glosario-tipo disciplinar">Disciplinar</span>
                    </p>
                    <p class="glosario-definicion">Problema donde muchos clientes reintentan simultÃ¡neamente despuÃ©s de una falla, potencialmente causando otra falla. Se mitiga con jitter.</p>
                </div>
                <div class="glosario-item">
                    <p class="glosario-termino">
                        Jitter
                        <span class="glosario-tipo disciplinar">Disciplinar</span>
                    </p>
                    <p class="glosario-definicion">VariaciÃ³n aleatoria aÃ±adida a tiempos de espera para desincronizar reintentos de mÃºltiples clientes.</p>
                </div>
                <div class="glosario-item">
                    <p class="glosario-termino">
                        Pydantic
                        <span class="glosario-tipo disciplinar">Disciplinar</span>
                    </p>
                    <p class="glosario-definicion">Biblioteca Python para validaciÃ³n de datos usando modelos con tipos. Genera errores descriptivos y documentaciÃ³n automÃ¡tica.</p>
                </div>
                <div class="glosario-item">
                    <p class="glosario-termino">
                        responses (biblioteca)
                        <span class="glosario-tipo disciplinar">Disciplinar</span>
                    </p>
                    <p class="glosario-definicion">Biblioteca Python para mockear peticiones HTTP en tests. Permite simular respuestas del servidor sin conexiÃ³n real.</p>
                </div>
                <div class="glosario-item">
                    <p class="glosario-termino">
                        Invariante
                        <span class="glosario-tipo aetl">AETL</span>
                    </p>
                    <p class="glosario-definicion">Principio que debe mantenerse verdadero independientemente de los cambios en el cÃ³digo. Sirve como guardrail para evaluar sugerencias de IA.</p>
                </div>
                <div class="glosario-item">
                    <p class="glosario-termino">
                        ADR
                        <span class="glosario-tipo disciplinar">Disciplinar</span>
                    </p>
                    <p class="glosario-definicion">Architecture Decision Record. Documento que captura una decisiÃ³n de arquitectura: contexto, decisiÃ³n, alternativas, consecuencias.</p>
                </div>
                <div class="glosario-item">
                    <p class="glosario-termino">
                        Happy Path
                        <span class="glosario-tipo disciplinar">Disciplinar</span>
                    </p>
                    <p class="glosario-definicion">Escenario de prueba donde todo funciona correctamente. Necesario pero insuficiente para validar robustez del cÃ³digo.</p>
                </div>
            </div>
        </section>

        <!-- ========== REFERENCIAS ========== -->
        <section class="referencias-section">
            <div class="section-header">
                <div class="section-icon">ğŸ“š</div>
                <h2 class="section-title">Referencias</h2>
            </div>
            <div class="referencias-lista">
                <div class="referencia-item">
                    <strong>Fielding, R. T. & Reschke, J. (2014).</strong> RFC 7231: Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content. <em>Internet Engineering Task Force.</em> Secciones 4.3 (mÃ©todos) y 6 (cÃ³digos de estado).
                </div>
                <div class="referencia-item">
                    <strong>OpenAPI Initiative. (2021).</strong> OpenAPI Specification 3.1.0. <em>Linux Foundation.</em> Referencia para diseÃ±o de contratos de API.
                </div>
                <div class="referencia-item">
                    <strong>Nygard, M. (2018).</strong> <em>Release It! Design and Deploy Production-Ready Software</em> (2nd ed.). Pragmatic Bookshelf. CapÃ­tulo 5: Stability Patterns (Circuit Breaker, Retry).
                </div>
                <div class="referencia-item">
                    <strong>Kleppmann, M. (2017).</strong> <em>Designing Data-Intensive Applications.</em> O'Reilly Media. CapÃ­tulo 8: Distributed Systems Trouble (idempotencia, reintentos).
                </div>
                <div class="referencia-item">
                    <strong>Python Software Foundation. (2024).</strong> requests: HTTP for Humans. DocumentaciÃ³n oficial de la biblioteca requests para Python.
                </div>
                <div class="referencia-item">
                    <strong>Pydantic. (2024).</strong> Pydantic v2 Documentation. Referencia para validaciÃ³n de datos con modelos tipados en Python.
                </div>
            </div>
        </section>

    </main>

    <!-- ========== FOOTER ========== -->
    <footer class="footer">
        <div class="footer-content">
            <p class="footer-logo">Universidad AutÃ³noma de Nayarit</p>
            <div class="footer-modelo">
                <span>ğŸ§ </span>
                <span>Modelo AETL v1.0</span>
            </div>
            <p class="footer-text">
                ProgramaciÃ³n Distribuida del Lado del Cliente<br>
                Licenciatura en Sistemas Computacionales<br>
                Documento de trabajo Â· Semana 2 de 15
            </p>
        </div>
    </footer>

    <script>
        // Intersection Observer para actualizar progreso y navegaciÃ³n
        document.addEventListener('DOMContentLoaded', function() {
            const sections = document.querySelectorAll('.fase-section');
            const progressSegments = document.querySelectorAll('.progress-segment');
            const progressStats = document.querySelector('.progress-stats');
            const navLinks = document.querySelectorAll('.nav-fase');
            
            const faseNames = {
                'comprende': 'Comprende',
                'aplica': 'Aplica',
                'reflexiona': 'Reflexiona',
                'valida': 'Valida',
                'profundiza': 'Profundiza'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const fase = entry.target.id;
                        updateProgress(fase);
                        updateNav(fase);
                    }
                });
            }, {
                rootMargin: '-20% 0px -70% 0px'
            });

            sections.forEach(section => observer.observe(section));

            function updateProgress(currentFase) {
                const fases = ['comprende', 'aplica', 'reflexiona', 'valida', 'profundiza'];
                const currentIndex = fases.indexOf(currentFase);
                
                progressSegments.forEach((segment, index) => {
                    const fase = segment.dataset.fase;
                    const faseIndex = fases.indexOf(fase);
                    
                    if (faseIndex <= currentIndex) {
                        segment.style.width = '20%';
                    } else {
                        segment.style.width = '0%';
                    }
                });

                if (progressStats && faseNames[currentFase]) {
                    progressStats.textContent = `Fase actual: ${faseNames[currentFase]}`;
                }
            }

            function updateNav(currentFase) {
                navLinks.forEach(link => {
                    link.style.background = '';
                    link.style.color = '';
                    
                    if (link.getAttribute('href') === `#${currentFase}`) {
                        const faseColor = getComputedStyle(document.documentElement)
                            .getPropertyValue(`--fase-${currentFase}`);
                        link.style.background = `${faseColor}15`;
                        link.style.color = faseColor;
                    }
                });
            }

            // Smooth scroll para navegaciÃ³n
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href.startsWith('#')) {
                        e.preventDefault();
                        const target = document.querySelector(href);
                        if (target) {
                            target.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>
